<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<style type="text/css">
		* {
			margin: 0; padding: 0;
		}
		html,body {
			height: 100%; overflow: hidden;
		}
		#box {
			position: absolute;
			left:0; top:100px;
			width: 30px; height: 30px; background: darkcyan;
			border-radius: 50%;
		}
		.line {
			position: absolute;
			left:800px; top:0;
			width: 1px; height: 100%; background: black;
		}
	</style>
</head>
<script src="animation.js" type="text/javascript" charset="utf-8"></script>
<script>
	window.onload = function(){
		var box = document.getElementById("box");
		var end = 800;
	
		/*
		
		//缓冲运动
		var timer = setInterval(function(){
			var speedX = Math.ceil((end-box.offsetLeft)/8);
			
			console.log(speedX)
			
			box.style.left = box.offsetLeft + speedX + "px";
			//speedX--;
			if(box.offsetLeft >=800) {
				clearInterval(timer);
			}
			console.log("ok")
		}, 30);
		
		*/
	   
/*		animate(box, { left: 800, width: 200}, function(){
			animate(box, { top: 300}, function(){
				animate(box, { left: 100} , function(){
					animate(box, { top: 100});
				});
			});
		});*/
		
	}
	
	//animate( obj, {left: 300, width: 400})
/*	function animate(ele, options, callback){
		for(var attr in options) {
			(function(prop){
				var targetvalue = options[prop];  //获取到终点值
				ele[prop+"-timer"] = setInterval(function(){
					console.log(prop);
					if(prop == "opacity") {
						var currentValue = parseFloat(getStyle(ele)[prop])*100;
						var speed = (targetvalue - currentValue)/7;
						speed = speed>0?Math.ceil(speed):Math.floor(speed);
						ele.style.opacity = (currentValue + speed)/100;
						ele.style.filter = "alpha(opacity="+(currentValue + speed)+")"
						if(ele.style.opacity == targetvalue/100) {
							clearInterval(ele["opacity-timer"]);
							if(isOver()) {
								callback ? callback() : "";
							}
						}
					} else {
						var currentValue = parseInt(getStyle(ele)[prop]);
						var speed = (targetvalue - currentValue)/7;
						speed = speed>0?Math.ceil(speed):Math.floor(speed);
						console.log(speed)
						ele.style[prop] =  currentValue + speed + "px";
						
					}
					
					if(parseInt(getStyle(ele)[prop]) == targetvalue) {
						clearInterval(ele[prop+"-timer"]);
						if(isOver()) {
							callback ? callback() : "";
						}
					}
				}, 30);
				
			})(attr);
		}
		
		function isOver() {
			var flag = true;
			for(var attr in options) {
				var targetval = options[attr];
				var curtVal = parseInt(getStyle(ele)[attr]);
				if(attr == "opacity") {
					curtVal = getStyle(ele)[attr]*100;
				}
				if(curtVal != targetval) {
					flag = false;
					return flag;
				}
			}
			return flag;
		}
	}
	*/
</script>

<body>
	<div id="box">
		
	</div>
	<div class="line">
		
	</div>
</body>

</html>
