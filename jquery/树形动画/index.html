<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8" />
		<title></title>
	</head>
	<style type="text/css">
		
		ul li.yiji {
			list-style-image: url(img/-.gif);
		}
	</style>

	<body>
		<ul>
			<li class="yiji">主题市场
				<ul>
					<li>运动派
						<ul>
							<li>三级菜单a
								<ul>
									<li>四级菜单a</li>
								</ul>
							</li>
							<li>三级菜单b</li>
							<li>三级菜单c</li>
							<li>三级菜单d</li>
						</ul>
					</li>
					<li>有车族
						<ul>
							<li>三级
								<ul style="display:hidden">
									<li>四级</li>
									<li>四级</li>
									<li>四级</li>
								</ul>
							</li>
							<li>三级</li>
							<li>三级</li>
							<li>三级</li>
						</ul>
					</li>
					<li>生活家</li>
				</ul>
			</li>
			<li class="yiji">特色购物
				<ul>
					<li>淘宝二手</li>
					<li>拍卖会</li>
					<li>爱逛街</li>
					<li>全球购</li>
					<li>淘女郎</li>
				</ul>
			</li>
			<li class="yiji">优惠促销
				<ul>
					<li>天天特价</li>
					<li>免费试用</li>
					<li>清仓</li>
					<li>1元起拍</li>
				</ul>
			</li>
			<li>工具</li>
		</ul>
		<script type="text/javascript" src="js/jquery-1.11.3.js"></script>
		<script type="text/javascript">

		//首先找到有子元素的所有li
		//has保留包含特定后代的元素，去掉那些不含有指定后代的元素。
		//$("li:has(ul)").click(function(e){
		$("li").has("ul").click(function(e){
			if(e.target != $(this).get(0)) return;  //这里要用this $this 是一个数组 
			if($(this).children().is(":hidden")){  //如果li的children元素是隐藏的 给他显示出来 同时减号
				$(this).children().stop().show(500);
				$(this).css("list-style-image","url(img/-.gif)");
			}else{
				$(this).children().hide(500);
				$(this).css("list-style-image","url(img/1.gif)");
			}
		})

		//没有子元素的li没有符号
		$("li").not(":has(ul)").css("list-style","none");
//$('li').has('ul') == $("li:has(ul)")























		/*	$("li:has(ul)").click(function(e){
				if(e.target != this) return;
				
				if($(this).children().is(":hidden") ) {
					$(this).css("list-style-image", "url(img/-.gif)");
					$(this).children().show(500);
				} else {
					$(this).children().hide(500);
					$(this).css("list-style-image", "url(img/1.gif)");
				}
			})	
			$("li").not(":has(ul)").css("list-style","none");*/
		</script>

	</body>

</html>